# 智能送餐系统客户端接口文档

## 用户Profile部分

1. ***微信登录***

   - 必选参数

     - code: 微信生成的临时code，用于后端向微信服务器获取openid等用户信息

   - 接口地址

     TODO

   - 可选参数

     无

   - 调用例子

     TODO

   - 返回结果

     - openid：用户账户对应的openid
     - TODO（可选）

2. ***获取用户详情***

   - 必选参数

     - openid
     - TODO

   - 接口地址

     TODO

   - 可选参数

     TODO

   - 返回结果

     - userInfo
       - name：用户昵称；如果初次登陆，返回一个默认昵称
       - avatar：用户头像url；如果初次登陆，返回一个默认头像
       - signature：用户个人简介；如果初次登陆，返回一个默认简介

3. ***更新用户详情***

   - 说明：***登录后***调用此接口，传入相关信息，可以更新用户信息

   - 必选参数
     - name：用户昵称
     - avatar：用户头像
     - signature：用户签名

   - 接口地址

     TODO

   - 可选参数

     TODO

   - 返回结果

     - userInfo：用户修改后的用户资料（不管修改是否成功），json对象
     - success：修改是否成功，布尔值

4. ***获取用户手册***

   - 说明：调用此接口，可以获取用户手册文件对象

   - 必选参数

     - 无

   - 接口地址

     TODO

   - 返回结果

     - usesrGuide：用户手册文件

       ```
       {
       	url: '',			//	文件访问url
       	fileType: ''	//	文件类型:pdf/docx/doc
       }
       ```

       

## 场景部分

1. ***获取用户当前所有场景列表***

   - 说明：用户登录后调用此接口，可以获取用户的场景列表

   - 必选参数

     - 无
     - TODO

   - 接口地址

     TODO

   - 可选参数

     TODO

   - 返回结果

     - scenes：当前用户的所有场景列表

       ```javascript
       [
       	{
           id: Number/String,//	场景唯一id
       		name: '默认场景' ,	//	场景名称,不得重复，创建/修改时需要前后端双向校验
           bg: '#F5EAC7',		//	场景壁纸颜色，默认为十六进制
           map: 'url',				//	地图文件url
           device: {
           	name: '设备名称',
           	addr: 'ip-addr',	//	设备对应ip地址，每次连接设备即是获取设备ip地址，同时类似TCP进行握手
             id: 设备id
             TODO
           },
           //	当前场景中的站点集合，站点的数据结构只需要后端处理坐标，站点第一次建立也是客户端发送的数据，只用存就对了，不用管怎么来的
           flags: [
             {
               name: '站点名称',
               img: 'url',	//	站点图片
               imgX: Number，	//	站点相对于地图左上角x坐标
               imgY: Number,	//	站点位置相对于地图左上角y坐标
               scale: Number, //	站点图片的缩放值
               TODO//	后端需要假的其他属性
             },...//	其他站点元素
           ]
       	}...
       ]
       ```

2. 创建场景

   - 说明：调用此接口，可以创建一个空场景

   - 必选参数

     - name:场景名称，不得重复
     - bg:场景壁纸

   - 接口地址

     TODO

   - 可选参数

     TODO

   - 返回结果

     - TODO：返回一些反馈信息

3. 修改场景信息（名称、壁纸）

   - 说明：调用此接口，可以修改场景基本信息

   - 必选参数

     - id：待修改的场景id

     - name：新的场景名称（不得与已有场景重复）
     - bg：场景壁纸

   - 接口地址

     TODO

   - 返回结果

     TODO

4. 删除场景

   - 说明：调用此接口，可以删除某个场景

   - 必选参数

     - id：场景唯一id
     - TODO

   - 接口地址

     TODO

   - 返回结果

     TODO

5. 创建站点

   - 说明：调用此接口，可以在某个场景中创建一个新的站点

   - 必选参数

     - id：场景id
     - name：新建站点名称，不得重复，可以用名字作为唯一区分，或者新加id也行
     - imgX：新建站点位置x坐标（相对于地图图片，前端坐标）
     - imgY：新建站点位置y坐标
     - scale：图片缩放比例
     - img：站点描述图片
     - TODO

   - 接口地址

     TODO

   - 返回结果

     TODO：注意，站点只能标注在可达区域，后端需要判断可达区域

6. 编辑站点信息

   - 说明：调用此接口，可以对已经建立的站点进行编辑

   - 必选参数

     - id：对应场景id

     - name：新的场景名字
     - img：新的站点图片

   - 接口地址

     TODO

   - 可选参数

     TODO

   - 返回结果

     TODO

7. 删除站点

   - 说明：调用此接口，可以对已经建立的站点进行删除

   - 必选参数

     - id：对应场景id
     - name：站点名称

   - 接口地址

     TODO

   - 可选参数

     TODO

   - 返回结果

     TODO

## 机器人工作

1. 获取对应设备当前电量

   - 必选参数

     - id：设备id
     - TODO

   - 接口地址

     TODO

   - 可选参数

     TODO

   - 返回结果

     - battery：Number，描述剩余电量百分比，如98.2%，则返回98.2
     - TODO

   - 调用例子

     TODO

2. 机器人迎宾

   - 说明：调用此接口，机器人将前往指定地点进行迎宾；注意，此时机器人必须为非工作状态

   - 必选参数

     - target：当前场景对应迎宾地点，可以讨论，前端可以提供对应站点名称、坐标等信息
     - TODO

   - 接口地址

     TODO

   - 调用例子

     TODO

   - 返回结果

     TODO

3. 机器人送餐

   TODO



