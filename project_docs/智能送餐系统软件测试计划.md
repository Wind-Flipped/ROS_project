# 智能送餐系统软件测试计划

## 文档版本历史

| 版本号 | 生效日期   | 主要编写人   | 审核人 | 说明             |
| ------ | ---------- | ------------ | ------ | ---------------- |
| 1.0    | 2023-05-14 | 测试计划初稿 | TODO   | 完成文档框架编写 |
|        |            |              |        |                  |
|        |            |              |        |                  |

## 分工说明

| 学号     | 姓名   | 本文档中主要承担的工作内容             |
| -------- | ------ | -------------------------------------- |
| 20373237 | 郑嘉文 | 主笔测试计划，设计服务器端单元测试用例 |
| TODO     |        |                                        |
|          |        |                                        |
|          |        |                                        |
|          |        |                                        |



## 一、范围

### 1.项目概述

​		本系统是一款可替代餐厅传菜员，实现自动配送的智能服务机器人系统。本送餐系统旨在提高餐厅配送效率，规范管理，可代替传统传菜员工作任务，并在实现自动化配送的同时，为餐厅创造新的亮点，营造未来科技元素。适用各类餐厅、酒店、园区、商场等公共场所，亦可扩展应用于隔离病房，实验室等，实现无接触式配送，降低人员接触的安全风险。

### 2.文档概述

#### 2.1文档用途

- 追踪需求，确定被测试项，其中需求包含数据需求、功能需求、非功能需求、异常处理需求、业务需求等
- 说明测试的软硬件环境、人员等配置
- 定义各测试项的测试级、测试类型、测试方法、测试时间、测试对象等属性
- 定义测试实施的一般条件和软件测试报告中对测试结果进行描述的规格
- 设计单元测试用例，确认系统各模块正确性
- 设计集成测试用例，确认系统完成基本功能的正确性
- 设计系统测试用例，确认系统整体功能、性能和正确性
- 完成验收测试、回归测试的计划
- 制定测试进度表

#### 2.2内容组织

- 范围
- 任务概述
- 测试环境
- 计划
- 测试进度表
- 需求可追踪性
- 注解

### 3.术语和缩略词

#### 3.1术语

​		本文档涉及的术语有：

- Ubuntu：一种Linux发行版
- C++: 一种面向对象的程序设计语言，可运行于多个平台。本项目中主要应用于ROS底层逻辑的编写
- Javascript：一种Web编程语言。本项目中主要应用于app客户端用户界面的编写
- TODO

#### 3.2缩略词

本文档涉及的缩略词包含

| 缩略词 | 全称                       |
| ------ | -------------------------- |
| ROS    | Robot Operating System     |
| LTS    | Long Term Support          |
| HTML   | Hyper Text Markup Language |
| CSS    | CascadingStyleSheets       |
| SDP    | 软件开发计划               |
| SRS    | 软件需求规格书             |
| SDD    | 软件设计说明               |
| STP    | 软件测试计划               |
| STR    | 软件测试报告               |

### 4.引用文档

[1] 北京六部工坊科技有限公司， 《启智ROS版_开发手册__20181109》, 2018-11-09

[2] SDP-软件开发计划 V1.1

[3] SRS-软件需求规格书 V1.1

[4] SDD-软件设计说明 V1.1

## 二、任务概述

### 1.综述

​		本项目整体需求可以分为业务需求、数据需求、功能需求、异常处理需求与非功能需求，本文档所提出的测试任务主要围绕软件需求规格说明书所提出的需求开展[3]

### 2.数据需求

​		机器人的数据实体包含机器人、用户、地图、语音指令，以及运动单元、机械臂等机器人组件实体。其中，用户实体不在本项目管理的范畴内，其余实体均集成在机器人的功能实现模块中，因此无法采取有效的测试方法独立对这些数据的正确性进行确认。

用户界面部分的数据实体包含场景信息，由数据库实现，可以进行测试。

| 需求编号 | 数据需求实体 | 描述                               | 需求实现单元 | 是否进行测试 |
| :------: | ------------ | ---------------------------------- | ------------ | ------------ |
|    1     | 用户界面场景 | 包含地图，场景名称，场景壁纸等信息 | 数据库       | 是           |

### 3.功能需求

​		本项目的功能需求由机器人和用户界面组成。针对机器人不同的服务功能，用户能且仅能通过用户界面输入向机器人发出指令；机器人在相应用户指令后，将执行结果以用户界面输出或语音的形式反馈给用户。

​		具体功能需求及其对应单元如下

1. 手动建图

   - 描述：用户在用户界面进入场景，选择【创建地图】，并在阅读相关须知后开启建图服务；机器人开启雷达监测，记录周围的环境数据；用户使用手柄控制机器人在建图模式下移动，机器人通过运动单元来感知用户发出的控制命令；当用户判断建图完成，可以在用户界面确认建图，同时命名、保存地图。

   - 测试方案

     | 需求实现单元 | 是否进行测试 |
     | :----------: | :----------: |
     |   用户界面   |      是      |
     |  系统服务端  |      是      |
     |    数据库    |      是      |
     |   雷达单元   |      是      |
     |   运动单元   |      是      |
     |   地图单元   |      是      |
     |   手柄单元   |      是      |
     |    控制器    |   协同测试   |
     |    传感器    |   协同测试   |
     |    调度器    |   协同测试   |

2. 场景编辑

   TODO

3. 迎宾带位

   TODO

4. 自动送餐

   TODO

### 4.异常处理需求

​		本项目的异常处理需求分为机器人异常情况处理、系统服务端异常处理与用户界面异常处理三部分。

​		异常处理需求及其对应模块如下，其中用户界面异常种类较多，将随着测试过程的推进不断补充。

1. 机器人长时间受障碍物阻碍

   - 描述：当机器人遇到障碍物时，负责导航功能的模块会引导机器人主动避让，但是当机器人所在位置与目标航点长时间没有可达路径或航点本身不可达时，应让机器人发出警报信号。机器人继续等待一定时限后，若仍无法到达目标航点，则停止导航。机器人的等待时间上限为TODO

   - 测试方案

     | 需求实现单元 | 是否进行测试 |
     | :----------: | :----------: |
     |   雷达单元   |      是      |
     |   运动单元   |      是      |
     |   地图单元   |      是      |
     |    扬声器    |      是      |
     |    控制器    |      是      |
     |    传感器    |      是      |
     |    调度器    |      是      |

2. 机器人因各种原因倾倒

   TODO

3. 站点命名冲突

   - 描述：用户在标注站点后，为不同站点命制了重复名称。系统需要提示用户重命名

   - 测试方案

     | 需求实现单元 | 是否进行测试 |
     | :----------: | :----------: |
     |   用户界面   |      是      |
     |  系统服务端  |      是      |
     |    数据库    |      是      |

4. TODO

### 5.业务需求

​		本系统主要由手动建图、场景编辑、迎宾带位、自动送餐三个主要的用例构成。

| 需求编号 | 业务需求 | 描述 | 是否进行测试 |
| -------- | -------- | ---- | ------------ |
| 1        | 手动建图 | TODO | 是           |
| 2        | 场景编辑 | TODO | 是           |
| 3        | 迎宾带位 | TODO | 是           |
| 4        | 自动送餐 | TODO | 是           |

### 6.非功能需求

​		系统应尽可能满足非功能需求，使用户体验超出预期。具体如下：

| 需求编号 | 非功能需求 | 描述                                                         | 是否进行测试 |
| :------: | :--------- | ------------------------------------------------------------ | :----------: |
|    1     | 响应时间   | 机器人在接受用户界面的指令后响应时间应控制在2秒内            |      是      |
|    2     | 功耗       | 机器人和机载电脑功耗应尽可能小                               |      是      |
|    3     | 处理能力   | 机器人和用户界面需要具备应对正常功能需求和异常情况的处理能力 |      是      |
|    4     | 可用性     | 机器人要满足实用的特性                                       |      是      |
|    5     | 可移植性   | 机器人系统刻意向具有相同架构的机器人上移植，用户界面采用微信小程序实现，可以方便在多个平台上使用 |      是      |
|    6     | 完整性     | 除了必要的功能需求、异常处理需求外，机器人应该丰富用户体验，更加完整 |      是      |
|    7     | TODO       | TODO                                                         |              |
|          |            |                                                              |              |
|          |            |                                                              |              |
|          |            |                                                              |              |
|          |            |                                                              |              |
|          |            |                                                              |              |
|          |            |                                                              |              |
|          |            |                                                              |              |
|          |            |                                                              |              |
|          |            |                                                              |              |
|          |            |                                                              |              |
|          |            |                                                              |              |
|          |            |                                                              |              |

## 三、测试环境

### 1.机器人实验室

#### 1.1地点

北京航空航天大学学院路校区新主楼G1027

#### 1.2软件项

| 软件项                              | 描述                   |
| ----------------------------------- | ---------------------- |
| Ubuntu 16.04LTS                     | 机载电脑的操作系统     |
| ROS Kinetic Kame                    |                        |
| 启智机器人ROS机器人相关基础包和驱动 |                        |
| Rviz                                |                        |
| Node.js                             | 用户界面所需的软件环境 |
| 微信开发者工具                      | 用户界面代码编写工具   |
| TODO                                |                        |
|                                     |                        |
|                                     |                        |
|                                     |                        |
|                                     |                        |
|                                     |                        |
|                                     |                        |
|                                     |                        |

#### 1.3硬件及固件项

| 硬件及固件项          | 描述                                     |
| --------------------- | ---------------------------------------- |
| ROS机器人（含机械臂） | 本项目最终产品的核心部分                 |
| Lenovo PC             | 机器人配备的电脑，也属于本项目的最终产品 |
| 个人智能手机          | 用来模拟用户的电脑                       |
| 互联网                | 使机器人的机载PC与用户PC保持稳定的通信   |
| 若干外设              | 用户保证机器人、电脑正常运作的外部设备   |
|                       |                                          |
|                       |                                          |

#### 1.4其他材料

| 其他材料               | 描述                      |
| ---------------------- | ------------------------- |
| 《启智ROS版_开发手册》 | 包含一些ROS例程的使用说明 |
| 摄像设备               | 用于摄录机器人的行为      |
| TODO                   |                           |
|                        |                           |
|                        |                           |
|                        |                           |
|                        |                           |

#### 1.5参与团队

| 人员   | 主要职责                     |
| ------ | ---------------------------- |
| 霍达   |                              |
| 郑嘉文 | 测试人员、用户客户端开发人员 |
| TODO   |                              |
|        |                              |
|        |                              |

#### 1.6定向计划

​		任何参与测试的人员应当具备安全意识，保证在实验室的全部测试流程的安全性。

​		核心测试人员需要掌握必备的单元测试技术、系统集成测试方法，熟悉测试流程，并能够寻书对测试结果做出记录和评价分析，然后将问题反馈至产品开发者。

### 2.Gazebo仿真环境

TODO



## 四、测试计划

### 1.总体设计

#### 1.1测试级

​		本项目的测试级分为需求测试、单元测试、集成测试、系统验收测试及后续迭代的回归测试。

#### 1.2测试类别

- 功能测试

  通过静态测试、白盒测试、黑盒测试、灰盒测试等方法对系统功能正确性进行确认，该项测试涵盖对数据需求和异常处理需求是否满足的测试，从单元测试阶段即开展

- 性能测试

  测试系统性能的响应时间、效率、健壮性等指标是否达到预期，主要采用黑盒测试的方法，在集成测试及之后的阶段开展，本类别的测试并不单独构造测试用例。

#### 1.3一般测试条件

- 所有测试应与机器人和机载电脑的硬件、操作系统环境相匹配
- 由于收到硬件资源使用限制，任何一项系统级以下的测试每次所持续的时间不应超过30分钟，系统级及以上的测试每次所持续时间不应超过60分钟
- 每次测试的开展需要至少2名团队成员实施和管理
- 遇不可抗力因素。如机器人检修、机载电脑故障，测试应尽量尝试在仿真环境下开展，如仍有困难，则延后测试计划
- 开发进度较慢，如关键人员因其他事务繁忙冲突，应酌情延后测试计划

#### 1.4测试过程

- 对SRS需求文档进行需求评审
- 静态评审ROS部分的C++代码
- 单元测试机器人的各个组成单元，确认其独立工作时的功能正确性，其中任何一个模块的单元测试都必须与控制器模块结合，并在机器人上完成，因此本阶段单元测试采用灰盒测试方法
- 测试数据库增、删、查、改以及主键、空值的等特性是否满足需求
- 静态评审系统服务端部分的Java代码
- 静态评审客户端用户界面部分的JavaScript代码
- 单元测试系统服务端的各个接口是否满足需求，能否正确回应请求消息、数据库行为是否正确，采用白盒测试法
- 单元测试客户端用户界面的各个接口是否可以正常发送请求，能否正常响应用户的操作，采用白盒测试法。
- TODO

#### 1.5数据记录、规约和分析

​		本条主要定义测试结果数据记录的若干类型、形式，测试报告书需严格按照各测试用例所对应的测试结果记录类型来撰写。

- 测试项目执行结果记录

  测试人员在列举用例结果前需要记录测试项目整体的情况，可以用表格或无序列表形式呈现

  | 记录项       | 描述                                                       |
  | ------------ | ---------------------------------------------------------- |
  | 测试项目标识 | 测试项目在这恩哥项目生命周期中的唯一标识                   |
  | 项目执行人   | 负责的人员姓名                                             |
  | 测试时间     | 测试的时间，精确到小时                                     |
  | 测试地点     | 测试项目具体执行的地点                                     |
  | 整体评价     | 对各个测试用例执行结果的简要综合评价，如结果是否为所预期的 |

- 静态评审结果记录

  在运行各单元和模块之前，需要一位没有参与单元编写的专业人员对代码进行静态评审并记录结果。静态评审以测试项为单位进行，需要记录的内容如下

  | 记录项           | 描述                                                         |
  | ---------------- | ------------------------------------------------------------ |
  | 测试项目标识     | 测试项目在整个项目声明周期中的唯一标识                       |
  | 项目静态评审员   | 负责静态评审的人员姓名                                       |
  | 代码风格         | 评价单元代码的编写风格，如整体良好、函数或变量命名不够清晰、缺少注释等 |
  | 代码检查与走查   | 记录是否存在常见逻辑错误，人脑模拟运行是否有潜在的漏洞       |
  | 补充内容（可选） | 任何需要补充记录或需要反馈给单元开发者的内容                 |

- 单元测试用例执行结果记录

  本部分对单元测试各用例的测试记录内容进行定义约束

  - 机器人各单元

    | 记录项           | 描述                                                         |
    | ---------------- | ------------------------------------------------------------ |
    | 测试用例标识     | 测试用例在整个项目生命周期中的唯一标识                       |
    | 被测单元名称     | 测试机器人单元的名称，如运动单元、机械臂、摄像头等           |
    | 实际输入         | 针对性记录对单元所收到的输入，如雷达单元感知室内的状态等。记录形式包括但不限于文字描述、图片、视频、音频等 |
    | 实际输出         | 记录被测单元在机载电脑上的反馈，如机械臂单元在工作过程中Rviz界面的变化情况，以及终端中的各类输出、警告、错误等。记录形式包括但不限于文字描述、图片、视频、音频等 |
    | 实际行为         | 记录机器人所做出的实际行为，如机械臂抬起、扬声器发出语音信息等 |
    | 评价             | 测试人员对本次测试的评价，可以从行为是否符合预期、有无预料外的异常出现、是否满足潜在的客户需求等多个角度记录。为了便于量化，也可以采用计分制对各个用例的执行结果进行评估。 |
    | 补充内容（可选） | 任何需要补充记录或反馈给单元开发者的内容                     |

  - 前后端各单元

    客户端用户界面和系统服务端的单元测试用例结果记录内容相同

    | 记录项           | 描述                                                         |
    | ---------------- | ------------------------------------------------------------ |
    | 测试用例标识     | 测试用例在整个项目生命周期中的唯一标识                       |
    | 被测单元名称     | 被测试的模块名称，后端通常表现为API，前端表现某个功能模块或单独页面 |
    | 实际输入         | 被测单元所获取的实际输入，如字符串、线性表以及触摸、滑动操作等 |
    | 实际输出         | 被测单元的输出，后端包括返回的状态码、消息、数据，进程执行结果、数据库状态等，前端包括页面响应情况等 |
    | 评价             | 测试人员对于本次测试的评价，主要评价是否符合预期             |
    | 补充内容（可选） | 任何需要补充记录或反馈给单元开发者的内容                     |

  - 集成测试用例执行结果记录

    | 记录项           | 描述                                                     |
    | ---------------- | -------------------------------------------------------- |
    | 测试用例标识     | 测试用例在整个项目生命周期中的唯一标识                   |
    | 被测功能         | 本测试用例所测试的功能需求                               |
    | 实际输入         | 对实现该功能的模块集合的实际输入，如字符串、触摸操作等   |
    | 实际输出         | 系统的输出，如机器人成功发出迎宾指令、客户端显示某界面等 |
    | 评价             | 测试人员对本次测试的评价                                 |
    | 补充内容（可选） | 任何需要补充记录或反馈给单元开发者的内容                 |

  - 系统测试用例执行结果记录

  - | 记录项           | 描述                                                 |
    | ---------------- | ---------------------------------------------------- |
    | 测试用例标识     | 测试用例在整个项目生命周期中的唯一标识               |
    | 测试类别         | 本测试的主要目标，如功能测试、压力测试、安全性测试等 |
    | 测试流程         | 详细记录执行测试用例时的所有操作                     |
    | 测试结果         | 记录系统验收的结果                                   |
    | 评价             | 测试人员对本次测试的评价                             |
    | 补充内容（可选） | 任何需要补充记录或需要反馈给开发者的内容             |

    问题用例及回归测试结果记录

    若测试用例在首次测试时未通过。需要开发者记录错误信息，并在修复漏洞后进行回归测试，再次记录结果。若后续迭代版本所进行的回归测试未出现不期望的的情况则无需特别记录，反之需要使用本记录形式进行记录。

    | 记录项             | 描述                                                         |
    | ------------------ | ------------------------------------------------------------ |
    | 测试项目标识       | 测试项目在整个项目生命周期中的唯一标识                       |
    | 出现问题的测试用例 | 出现问题的测试用例标识                                       |
    | 具体问题描述       | 对出现的问题进行清晰易懂的描述                               |
    | 影响               | 评估该问题对软件总体功能和性能的影响                         |
    | 可行的解决方案     | 判断问题原因与解决方案                                       |
    | 回归测试1          | 记录回归测试该用例的结果                                     |
    | 分析1              | 记录具体才去的问题对应修复措施，若未能修复也需要记录可能原因，同时提出建议方案 |
    | ...                | 若回归测试仍然存在问题，可以多次修复并记录每次回归测试的结果 |

### 2.计划执行的测试项目及测试用例

#### 2.1单元测试

##### 机器人

###### 测试大纲

- 唯一标识：RBT
- 被测项等级：子系统
- 测试级：单元测试
- 测试类型：功能测试
- 测试方法：静态评审、灰盒测试
- 数据记录类型：1.5测试项目执行结果记录、1.5静态评审结果记录、1.5单元测试用例执行结果记录/机器人各单元
- 测试时间安排：2023-05-17前

###### 子模块

1. 雷达

   - 测试大纲
     - 测试项目标识
     - 测试对象
     - 流程图
   - 灰盒测试
     1. 测试用例1
        - 测试用例标识：TODO
        - 测试项目：TODO
        - 条件或状态：机器人与机载电脑有足够的电量
        - 输入
        - 期望输出
        - 评价准则：无
        - 测试流程
          - 启动雷达测试脚本并。。。
          - TODO
        - 假设和约束：无
        - 备注：测试异常情况可能会损坏硬件设备，因此不针对异常进行测试
     2. TODO

2. 运动单元

   TODO

